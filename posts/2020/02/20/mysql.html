<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>mysql | Cumelmell blog</title>
    <meta name="generator" content="VuePress 1.5.0">
    <meta name="description" content="Welcome to my blog">
    <link rel="preload" href="/assets/css/0.styles.754addc1.css" as="style"><link rel="preload" href="/assets/js/app.181418c7.js" as="script"><link rel="preload" href="/assets/js/15.101a1bc0.js" as="script"><link rel="preload" href="/assets/js/30.cb155480.js" as="script"><link rel="prefetch" href="/assets/js/1.f812d5f4.js"><link rel="prefetch" href="/assets/js/10.33ada691.js"><link rel="prefetch" href="/assets/js/11.3c9cdaea.js"><link rel="prefetch" href="/assets/js/12.e97335a9.js"><link rel="prefetch" href="/assets/js/13.ff4d7b7f.js"><link rel="prefetch" href="/assets/js/14.b46db719.js"><link rel="prefetch" href="/assets/js/16.cdf6f8e1.js"><link rel="prefetch" href="/assets/js/17.80b2eedf.js"><link rel="prefetch" href="/assets/js/18.84b2386a.js"><link rel="prefetch" href="/assets/js/19.0c939222.js"><link rel="prefetch" href="/assets/js/20.4743e770.js"><link rel="prefetch" href="/assets/js/21.bf348638.js"><link rel="prefetch" href="/assets/js/22.eb71fa59.js"><link rel="prefetch" href="/assets/js/23.7a7a5706.js"><link rel="prefetch" href="/assets/js/24.b11aba65.js"><link rel="prefetch" href="/assets/js/25.8a13419b.js"><link rel="prefetch" href="/assets/js/26.91334cbc.js"><link rel="prefetch" href="/assets/js/27.110950de.js"><link rel="prefetch" href="/assets/js/28.f5a0a717.js"><link rel="prefetch" href="/assets/js/29.0ff01926.js"><link rel="prefetch" href="/assets/js/3.d9dfd1d1.js"><link rel="prefetch" href="/assets/js/31.46ac67a3.js"><link rel="prefetch" href="/assets/js/32.e609b5a0.js"><link rel="prefetch" href="/assets/js/33.d0cbd4f1.js"><link rel="prefetch" href="/assets/js/4.82e05b7d.js"><link rel="prefetch" href="/assets/js/5.ddb5c4c0.js"><link rel="prefetch" href="/assets/js/6.274a3c90.js"><link rel="prefetch" href="/assets/js/7.fea7d5f2.js"><link rel="prefetch" href="/assets/js/8.1f3246eb.js"><link rel="prefetch" href="/assets/js/9.850e087a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.754addc1.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-meteorlxy"><header class="header" data-v-7a046aea><div data-v-e4145d0a data-v-7a046aea><nav class="navbar" data-v-e4145d0a><div class="container" data-v-e4145d0a><a href="/" class="router-link-active" data-v-e4145d0a><span class="navbar-site-name" data-v-e4145d0a>
          Cumelmell blog
        </span></a> <div class="navbar-toggler" data-v-e4145d0a><svg class="icon" style="font-size:1.2em;" data-v-e4145d0a data-v-e4145d0a><title data-v-e4145d0a data-v-e4145d0a>menu</title><use xlink:href="#icon-menu" data-v-e4145d0a data-v-e4145d0a></use></svg></div> <div class="navbar-links" data-v-e4145d0a><a href="/" class="navbar-link" data-v-e4145d0a>
            首页
          </a><a href="/posts/" class="navbar-link router-link-active" data-v-e4145d0a>
            文章
          </a><a href="https://github.com/d1313113/d1313113.github.io" target="_blank" rel="noopener noreferrer" class="navbar-link" data-v-e4145d0a><span data-v-e4145d0a>github</span> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound" data-v-e4145d0a data-v-e4145d0a><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div></nav> <div class="navbar-holder" style="display:none;" data-v-e4145d0a></div></div> <div class="banner" data-v-98d6aa8c data-v-7a046aea data-v-7a046aea><div class="container" data-v-98d6aa8c><div class="center" data-v-98d6aa8c><h1 data-v-98d6aa8c data-v-7a046aea>
          mysql
        </h1></div></div></div></header> <div class="container clearfix show-aside" data-v-4dd605a1 data-v-4dd605a1><main class="main" data-v-4dd605a1><div class="post" data-v-4dd605a1 data-v-4dd605a1><section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2020-02-20
    </span> <span class="update-date" data-v-4e23451f>
      最后修改 : Invalid Date
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2019/11/29/scss.html" class="post-link" data-v-4e23451f>
      上一篇 : react 使用 dart-sass
    </a> <a href="/posts/2020/03/29/phicomm-n1.html" class="post-link" data-v-4e23451f>
      下一篇 : 斐讯n1
    </a></section></section> <article class="main-div"><div class="post-content content content__default"><h2 id="创建数据库"><a href="#创建数据库" class="header-anchor">#</a> 创建数据库</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- {必填} [可选]</span>
<span class="token keyword">CREATE</span> {<span class="token keyword">DATABASE</span> <span class="token operator">|</span> <span class="token keyword">SCHEMA</span>} <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> db_name <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span> charset_name<span class="token punctuation">;</span>
<span class="token comment">-- 查看创建的数据库</span>
<span class="token keyword">SHOW</span> <span class="token keyword">CREATE</span> <span class="token keyword">DATABASE</span> t1<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="查看当前服务器下数据库列表"><a href="#查看当前服务器下数据库列表" class="header-anchor">#</a> 查看当前服务器下数据库列表</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> {<span class="token keyword">DATABASE</span> <span class="token operator">|</span> <span class="token keyword">SCHEMA</span>} <span class="token punctuation">[</span><span class="token operator">LIKE</span> <span class="token string">'pattern'</span> <span class="token operator">|</span> <span class="token keyword">WHERE</span> expr<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="查看错误信息"><a href="#查看错误信息" class="header-anchor">#</a> 查看错误信息</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">WARNINGS</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="修改数据库"><a href="#修改数据库" class="header-anchor">#</a> 修改数据库</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> {<span class="token keyword">DATABASE</span> <span class="token operator">|</span> <span class="token keyword">SCHEMA</span>} <span class="token punctuation">[</span>db_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">DEFAULT</span><span class="token punctuation">]</span> <span class="token keyword">CHARACTER</span> <span class="token keyword">SET</span> <span class="token punctuation">[</span><span class="token operator">=</span><span class="token punctuation">]</span> charset_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="删除数据库"><a href="#删除数据库" class="header-anchor">#</a> 删除数据库</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DROP</span> {<span class="token keyword">DATABASE</span> <span class="token operator">|</span> <span class="token keyword">SCHEMA</span>} <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> db_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="数据类型"><a href="#数据类型" class="header-anchor">#</a> 数据类型</h1> <h2 id="整型"><a href="#整型" class="header-anchor">#</a> 整型</h2> <ul><li>TINYINT</li> <li>SMALLINT</li> <li>MEDIUMINT</li> <li>INT</li> <li>BIGINT</li></ul> <h2 id="浮点型"><a href="#浮点型" class="header-anchor">#</a> 浮点型</h2> <ul><li>FLOAT</li> <li>DOUBLE</li></ul> <h1 id="日期时间型"><a href="#日期时间型" class="header-anchor">#</a> 日期时间型</h1> <ul><li>YEAR</li> <li>TIME</li> <li>DATE</li> <li>DATETIME</li> <li>TIMESTAMP</li></ul> <h2 id="字符型"><a href="#字符型" class="header-anchor">#</a> 字符型</h2> <ul><li>CHAR</li> <li>VARCHAR</li> <li>TINYTEXT</li> <li>TEXT</li> <li>MEDIUMTEXT</li> <li>LONGTEXT</li> <li>ENUM</li> <li>SET</li></ul> <h1 id="使用数据库"><a href="#使用数据库" class="header-anchor">#</a> 使用数据库</h1> <h2 id="打开数据库"><a href="#打开数据库" class="header-anchor">#</a> 打开数据库</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">USE</span> database_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="创建数据表"><a href="#创建数据表" class="header-anchor">#</a> 创建数据表</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> <span class="token punctuation">[</span><span class="token keyword">IF</span> <span class="token operator">NOT</span> <span class="token keyword">EXISTS</span><span class="token punctuation">]</span> table_name <span class="token punctuation">(</span>
  column_name data_type<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h2 id="查看数据表"><a href="#查看数据表" class="header-anchor">#</a> 查看数据表</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span> <span class="token punctuation">[</span><span class="token keyword">FROM</span> db_name<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token operator">LIKE</span> <span class="token punctuation">`</span>pattern<span class="token punctuation">`</span> <span class="token operator">|</span> <span class="token keyword">WHERE</span> expr<span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">-- 查看 mysql 下所有的表</span>
<span class="token keyword">SHOW</span> <span class="token keyword">TABLES</span> <span class="token keyword">FROM</span> mysql<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="查看数据表结构"><a href="#查看数据表结构" class="header-anchor">#</a> 查看数据表结构</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SHOW</span> <span class="token keyword">COLUMNS</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="插入记录-insert"><a href="#插入记录-insert" class="header-anchor">#</a> 插入记录 INSERT</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 如果不使用列名称去插入数据,使用 VALUES 就需要提供所有字段数据</span>
<span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> table_name <span class="token punctuation">[</span><span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span>val<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">INSERT</span> tb1 <span class="token punctuation">(</span>col_name1<span class="token punctuation">,</span> col_name2<span class="token punctuation">)</span> <span class="token keyword">VALUES</span><span class="token punctuation">(</span><span class="token punctuation">`</span><span class="token number">11</span><span class="token punctuation">`</span><span class="token punctuation">,</span> <span class="token number">123</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="查看记录-select"><a href="#查看记录-select" class="header-anchor">#</a> 查看记录 SELECT</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> expr<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token keyword">FROM</span> table_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="数据表字段属性"><a href="#数据表字段属性" class="header-anchor">#</a> 数据表字段属性</h2> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">TABLE</span> tb <span class="token punctuation">(</span>
  id <span class="token keyword">INT</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">)</span> <span class="token keyword">AUTO_INCREMENT</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
  username <span class="token keyword">VARCHAR</span><span class="token punctuation">(</span><span class="token number">30</span><span class="token punctuation">)</span> <span class="token operator">NOT</span> <span class="token boolean">NULL</span> <span class="token keyword">UNIQUE</span> <span class="token keyword">KEY</span><span class="token punctuation">,</span>
  age <span class="token keyword">TINYINT</span> <span class="token keyword">UNSIGNED</span><span class="token punctuation">,</span>
  sex <span class="token keyword">ENUM</span><span class="token punctuation">(</span><span class="token string">'1'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">,</span> <span class="token string">'2'</span><span class="token punctuation">)</span> <span class="token keyword">DEFAULT</span> <span class="token string">'3'</span><span class="token punctuation">,</span>
  province_id <span class="token keyword">SMALLINT</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">(</span>province_id<span class="token punctuation">)</span> <span class="token keyword">REFERENCES</span> provinces <span class="token punctuation">(</span>id<span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="空值"><a href="#空值" class="header-anchor">#</a> 空值</h3> <ul><li><code>NULL</code>,字段值可以为空</li></ul> <h3 id="非空"><a href="#非空" class="header-anchor">#</a> 非空</h3> <ul><li><code>NOT NULL</code>,字段值禁止为空</li></ul> <h3 id="自动编号"><a href="#自动编号" class="header-anchor">#</a> 自动编号</h3> <ul><li>自动编号,且必须与主键组合使用</li> <li>默认情况下,起始值为1,每次的增量为1</li></ul> <h2 id="主键"><a href="#主键" class="header-anchor">#</a> 主键</h2> <ul><li>主键约束</li> <li>每张数据表只能存在一个主键</li> <li>主键保证记录的唯一性</li> <li>主键自动为 <code>NOT NULL</code></li> <li>自增需要和主键配合使用,但主键并不必须自增</li></ul> <h2 id="约束"><a href="#约束" class="header-anchor">#</a> 约束</h2> <ol><li>约束保证数据的完整性和一致性</li> <li>约束分为表级约束和列级约束</li> <li>约束类型包括:
<ol><li>NOT NULL (非空约束)</li> <li>PRIMARY KEY (主键约束)</li> <li>UNIQUE KEY (唯一约束)</li> <li>DEFAULT (默认约束)</li> <li>FOREIGN KEY (外键约束)</li></ol></li></ol> <h3 id="unique-key"><a href="#unique-key" class="header-anchor">#</a> UNIQUE KEY</h3> <ul><li>唯一约束</li> <li>唯一约束可以保证记录的唯一性</li> <li>唯一约束的字段可以为空值(NULL)</li> <li>没长数据表可以存在多个唯一约束</li></ul> <h3 id="默认约束-default"><a href="#默认约束-default" class="header-anchor">#</a> 默认约束 DEFAULT</h3> <ul><li>默认值</li> <li>当插入记录时,如果没有明确为字段赋值,则自动赋予默认值.</li></ul> <h3 id="外键约束-foreign-key"><a href="#外键约束-foreign-key" class="header-anchor">#</a> 外键约束 FOREIGN KEY</h3> <ul><li>保持数据一致性,完整性</li> <li>实现一对一或一对多关系</li></ul> <p>要求:</p> <ol><li>父表和字表必须使用相同的存储引擎,并且禁止使用临时表</li> <li>数据表的存储引擎只能为 InnoDB</li> <li>外键列和参照列必须具有相似的数据类型.其中数字的长度或是否有符号位必须相同;而字符的长度则可以不同</li> <li>外键列和参照列必须创建索引.如果外键列不存在索引的话, mysql 将自动创建索引</li></ol> <p>参照操作</p> <ol><li>CASCADE: 从父表删除或更新且自动删除或更新字表中匹配的行</li> <li>SET NULL: 从父表删除或更新行,并设置字表中的外键列</li> <li>RESTRICT: 拒绝对父表的删除或更新操作</li> <li>NO ACTION: 标准 SQL 的关键字,在 mysql 中与 RESTRICT 相同</li></ol> <h3 id="表级约束与列级约束"><a href="#表级约束与列级约束" class="header-anchor">#</a> 表级约束与列级约束</h3> <ul><li>对一个数据列建立的约束,称为列级约束</li> <li>对多个数据列建立的约束,称为表级约束</li> <li>列级约束既可以在列定义时声明,也可以在列定义后声明</li> <li>表级约束只能在列定义后声明</li></ul> <h2 id="修改数据表"><a href="#修改数据表" class="header-anchor">#</a> 修改数据表</h2> <h3 id="添加单列"><a href="#添加单列" class="header-anchor">#</a> 添加单列</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> col_name column_definition <span class="token punctuation">[</span>FITST<span class="token operator">|</span><span class="token keyword">AFTER</span> col_name<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="删除列"><a href="#删除列" class="header-anchor">#</a> 删除列</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">DROP</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> col_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="添加主键约束"><a href="#添加主键约束" class="header-anchor">#</a> 添加主键约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span> <span class="token punctuation">[</span>symbol<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span> <span class="token punctuation">[</span>index_type<span class="token punctuation">]</span> <span class="token punctuation">(</span>index_col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="添加唯一约束"><a href="#添加唯一约束" class="header-anchor">#</a> 添加唯一约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span> <span class="token punctuation">[</span>symbol<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">UNIQUE</span> <span class="token punctuation">[</span>index_type<span class="token punctuation">]</span> <span class="token punctuation">(</span>index_col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="添加外检约束"><a href="#添加外检约束" class="header-anchor">#</a> 添加外检约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ADD</span> <span class="token punctuation">[</span><span class="token keyword">CONSTRAINT</span> <span class="token punctuation">[</span>symbol<span class="token punctuation">]</span><span class="token punctuation">]</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> <span class="token punctuation">[</span>index_name<span class="token punctuation">]</span><span class="token punctuation">(</span>index_col_name<span class="token punctuation">)</span> reference_definition<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="添加-删除默认约束"><a href="#添加-删除默认约束" class="header-anchor">#</a> 添加/删除默认约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">ALTER</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> column_name {<span class="token keyword">SET</span> <span class="token keyword">DEFAULT</span> literal <span class="token operator">|</span> <span class="token keyword">DROP</span> <span class="token keyword">DEFAULT</span>}<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="删除主键约束"><a href="#删除主键约束" class="header-anchor">#</a> 删除主键约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">DROP</span> <span class="token keyword">PRIMARY</span> <span class="token keyword">KEY</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="删除唯一约束"><a href="#删除唯一约束" class="header-anchor">#</a> 删除唯一约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">DROP</span> {<span class="token keyword">INDEX</span> <span class="token operator">|</span> <span class="token keyword">KEY</span>} index_name<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="删除外检约束"><a href="#删除外检约束" class="header-anchor">#</a> 删除外检约束</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">DROP</span> <span class="token keyword">FOREIGN</span> <span class="token keyword">KEY</span> fk_symbol<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="修改列定义"><a href="#修改列定义" class="header-anchor">#</a> 修改列定义</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">MODIFY</span> <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> column_name column_definition <span class="token punctuation">[</span><span class="token keyword">FIRST</span> <span class="token operator">|</span> <span class="token keyword">AFTER</span> colum_name<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="修改列名称"><a href="#修改列名称" class="header-anchor">#</a> 修改列名称</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name CHANGE <span class="token punctuation">[</span><span class="token keyword">COLUMN</span><span class="token punctuation">]</span> old_col_name new_col_name column_definition <span class="token punctuation">[</span><span class="token keyword">FIRST</span> <span class="token operator">|</span> <span class="token keyword">AFTER</span> col_name<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="数据表更名"><a href="#数据表更名" class="header-anchor">#</a> 数据表更名</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 方法1</span>
<span class="token keyword">ALTER</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">RENAME</span> <span class="token punctuation">[</span><span class="token keyword">TO</span> <span class="token operator">|</span> <span class="token keyword">AS</span><span class="token punctuation">]</span> new_table_name<span class="token punctuation">;</span>
<span class="token comment">-- 方法2</span>
<span class="token keyword">RENAME</span> <span class="token keyword">TABLE</span> table_name <span class="token keyword">TO</span> new_table_name <span class="token punctuation">[</span><span class="token punctuation">,</span> table_name2 <span class="token keyword">TO</span> new_table_name2<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="insert"><a href="#insert" class="header-anchor">#</a> INSERT</h3> <p>为默认的自增<code>key</code>赋值可以使用<code>null,default</code>;</p> <p>可以给有默认值的列使用<code>default</code></p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 可以同时插入多条数据,用逗号隔开</span>
<span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> table_name <span class="token punctuation">[</span><span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span> {<span class="token keyword">VALUES</span> <span class="token operator">|</span> <span class="token keyword">VALUE</span>} <span class="token punctuation">(</span>{expr <span class="token operator">|</span> <span class="token keyword">DEFAULT</span>}<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token comment">-- 与上一种方式的区别在于,此方法可以使用子查询(subQuery)</span>
<span class="token comment">-- 只能插入一条记录</span>
<span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> table_name <span class="token keyword">SET</span> col_name<span class="token operator">=</span>{expr <span class="token operator">|</span> DEFUALT}<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
<span class="token comment">-- 把查询的结果插入到指定数据表</span>
<span class="token keyword">INSERT</span> <span class="token punctuation">[</span><span class="token keyword">INTO</span><span class="token punctuation">]</span> table_name <span class="token punctuation">[</span><span class="token punctuation">(</span>col_name<span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token keyword">SELECT</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="update"><a href="#update" class="header-anchor">#</a> UPDATE</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> <span class="token punctuation">[</span>LOW_PRIORIRY<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token keyword">IGNORE</span><span class="token punctuation">]</span> table_reference <span class="token keyword">SET</span> col_name1<span class="token operator">=</span>{expr1 <span class="token operator">|</span> <span class="token keyword">DEFAULT</span>} <span class="token punctuation">[</span><span class="token punctuation">,</span> col_name2<span class="token operator">=</span>{expr2 <span class="token operator">|</span> <span class="token keyword">DEFAULT</span>}<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="delete"><a href="#delete" class="header-anchor">#</a> DELETE</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">DELETE</span> <span class="token keyword">FROM</span> table_name <span class="token punctuation">[</span><span class="token keyword">WHERE</span> where_condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="select"><a href="#select" class="header-anchor">#</a> SELECT</h3> <ol><li>每一个表达式表示想要的一列,必须有至少一个</li> <li>多个列之间用英文逗号分隔</li> <li>星号(<em>)表示所有列. table_name.</em> 可以表示命名表的所有列</li> <li>查询表达式可以使用 [AS] alias_name 为其赋予别名</li> <li>别用可用于 GROUP BY, ORDER BY 或 HAVING 子句</li></ol> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">SELECT</span> select_expr <span class="token punctuation">[</span><span class="token punctuation">,</span> select_expr <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
<span class="token punctuation">[</span>
  <span class="token keyword">FROM</span> table_references
  <span class="token punctuation">[</span>WHERER where_condition<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> {col_name <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token keyword">HAVING</span> where_condition<span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
  <span class="token punctuation">[</span><span class="token keyword">LIMIT</span> {<span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count <span class="token operator">|</span> row_count <span class="token keyword">OFFSET</span> <span class="token keyword">offset</span>}<span class="token punctuation">]</span>
<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="where"><a href="#where" class="header-anchor">#</a> WHERE</h3> <p>条件表达式</p> <ul><li>对记录进行过滤,如果没有指定 WHERE 子句,则显示所有记录.</li> <li>在 WHERE 表达式中,可以使用 mysql 支持的函数或运算符</li></ul> <h3 id="group-by"><a href="#group-by" class="header-anchor">#</a> GROUP BY</h3> <p>查询结果分组</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span><span class="token keyword">GROUP</span> <span class="token keyword">BY</span> {col_name <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="order-by"><a href="#order-by" class="header-anchor">#</a> ORDER BY</h3> <p>对返回的结果进行排序</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span><span class="token keyword">ORDER</span> <span class="token keyword">BY</span> {col_name <span class="token operator">|</span> expr <span class="token operator">|</span> position} <span class="token punctuation">[</span><span class="token keyword">ASC</span> <span class="token operator">|</span> <span class="token keyword">DESC</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="limit"><a href="#limit" class="header-anchor">#</a> LIMIT</h3> <p>限制查询结果返回的数据</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token punctuation">[</span><span class="token keyword">LIMIT</span> {<span class="token punctuation">[</span><span class="token keyword">offset</span><span class="token punctuation">,</span><span class="token punctuation">]</span> row_count <span class="token operator">|</span> row_count <span class="token keyword">OFFSET</span> <span class="token keyword">offset</span>}<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="子查询-连接"><a href="#子查询-连接" class="header-anchor">#</a> 子查询 连接</h2> <h3 id="子查询"><a href="#子查询" class="header-anchor">#</a> 子查询</h3> <ul><li>子查询指嵌套在查询内部,且必须始终出现在圆括号内</li> <li>子查询可以包含多个关键字或条件,
<ul><li>如 DISTINCT, GROUP BY, ORDER BY, LIMIT,函数等</li></ul></li> <li>子查询的外层查询可以是: SELECT, INSERT, UPDATE, SET 或 DO</li></ul> <h4 id="使用比较运算符的子查询"><a href="#使用比较运算符的子查询" class="header-anchor">#</a> 使用比较运算符的子查询</h4> <h5 id="使用比较运算符的子查询-2"><a href="#使用比较运算符的子查询-2" class="header-anchor">#</a> 使用比较运算符的子查询</h5> <p>=、&gt;、&lt;、&gt;=、&lt;=、&lt;&gt;、!=、&lt;=&gt;</p> <p>语法结构</p> <p>operand comparision_operator [ANY| SOME | ALL] subquery</p> <h5 id="用-any、some-或-all-修饰的比较运算符"><a href="#用-any、some-或-all-修饰的比较运算符" class="header-anchor">#</a> 用 ANY、SOME 或 ALL 修饰的比较运算符</h5> <h5 id="使用-not-in-的子查询"><a href="#使用-not-in-的子查询" class="header-anchor">#</a> 使用 [NOT] IN 的子查询</h5> <h5 id="使用-not-exists-的子查询"><a href="#使用-not-exists-的子查询" class="header-anchor">#</a> 使用 [NOT] EXISTS 的子查询</h5> <h3 id="多表更新"><a href="#多表更新" class="header-anchor">#</a> 多表更新</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">UPDATE</span> table_reforences <span class="token keyword">SET</span> col_name1 <span class="token operator">=</span> {expr1 <span class="token operator">|</span> <span class="token keyword">DEFAULT</span>} <span class="token punctuation">[</span><span class="token punctuation">,</span> col_name2<span class="token operator">=</span>{expr2 <span class="token operator">|</span> <span class="token keyword">DEFAULT</span>}<span class="token punctuation">]</span> <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> <span class="token punctuation">[</span><span class="token keyword">WHERE</span> wherr_condition<span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="连接"><a href="#连接" class="header-anchor">#</a> 连接</h3> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code>table_reference
{<span class="token punctuation">[</span><span class="token keyword">INNER</span> <span class="token operator">|</span> <span class="token keyword">CROSS</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span> <span class="token operator">|</span> {<span class="token keyword">LEFT</span> <span class="token operator">|</span> <span class="token keyword">RIGHT</span>} <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span>}
table_reference
<span class="token keyword">ON</span> conditional_expr<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="连接类型"><a href="#连接类型" class="header-anchor">#</a> 连接类型</h4> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token comment">-- 内连接</span>
<span class="token keyword">INNER</span> <span class="token keyword">JOIN</span>
<span class="token comment">-- 在 mysql 中, JOIN, CROSS JOIN 和 INNER JOIN 是等价的</span>
<span class="token comment">-- 左外连接</span>
<span class="token keyword">LEFT</span> <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span>
<span class="token comment">-- 右外连接</span>
<span class="token keyword">RIGHT</span> <span class="token punctuation">[</span><span class="token keyword">OUTER</span><span class="token punctuation">]</span> <span class="token keyword">JOIN</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h5 id="内连接"><a href="#内连接" class="header-anchor">#</a> 内连接</h5> <p>显示左表及右表符合连接条件的记录</p> <h5 id="左外连接"><a href="#左外连接" class="header-anchor">#</a> 左外连接</h5> <p>显示左表的全部记录及右表符合连接条件的记录</p> <h5 id="右外连接"><a href="#右外连接" class="header-anchor">#</a> 右外连接</h5> <p>显示右表的全部记录及左表符合连接条件的记录</p> <h5 id="自身连接"><a href="#自身连接" class="header-anchor">#</a> 自身连接</h5> <p>同一个数据表对其自身进行连接</p> <h2 id="运算符及函数"><a href="#运算符及函数" class="header-anchor">#</a> 运算符及函数</h2> <h3 id="字符函数"><a href="#字符函数" class="header-anchor">#</a> 字符函数</h3> <table><thead><tr><th>函数名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>CONCAT()</td> <td style="text-align:left;">字符连接</td></tr> <tr><td>CONCAT_WS()</td> <td style="text-align:left;">使用指定的分隔符进行字符连接</td></tr> <tr><td>FORMAT()</td> <td style="text-align:left;">数字格式化</td></tr> <tr><td>LOWER()</td> <td style="text-align:left;">转换成小写字母</td></tr> <tr><td>UPPER()</td> <td style="text-align:left;">转换成大写字符</td></tr> <tr><td>LEFT()</td> <td style="text-align:left;">获取左侧字符</td></tr> <tr><td>RIGHT()</td> <td style="text-align:left;">获取右侧字符</td></tr> <tr><td>LENGTH()</td> <td style="text-align:left;">获取字符串长度</td></tr> <tr><td>LTRIM()</td> <td style="text-align:left;">删除前导空格</td></tr> <tr><td>RTRIM()</td> <td style="text-align:left;">删除后续空格</td></tr> <tr><td>TRIM()</td> <td style="text-align:left;">删除前后空格/字符</td></tr> <tr><td>SUBSTRING()</td> <td style="text-align:left;">字符串截取</td></tr> <tr><td>[NOT] LIKE</td> <td style="text-align:left;">匹配模式</td></tr> <tr><td>REPLACE()</td> <td style="text-align:left;">字符串替换</td></tr></tbody></table> <h3 id="数值运算符与函数"><a href="#数值运算符与函数" class="header-anchor">#</a> 数值运算符与函数</h3> <table><thead><tr><th>名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>CEIL()</td> <td style="text-align:left;">进一取整</td></tr> <tr><td>DIV</td> <td style="text-align:left;">整数除法</td></tr> <tr><td>FLOOR()</td> <td style="text-align:left;">舍一取整</td></tr> <tr><td>MOD</td> <td style="text-align:left;">取余数(取模)</td></tr> <tr><td>POWER()</td> <td style="text-align:left;">幂运算</td></tr> <tr><td>ROUND()</td> <td style="text-align:left;">四舍五入</td></tr> <tr><td>TRUNCATE()</td> <td style="text-align:left;">数字截取</td></tr></tbody></table> <h3 id="比较运算符与函数"><a href="#比较运算符与函数" class="header-anchor">#</a> 比较运算符与函数</h3> <table><thead><tr><th>名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>[NOT] BETWEEN...AND...</td> <td style="text-align:left;">[不]在范围之内</td></tr> <tr><td>[NOT] IN()</td> <td style="text-align:left;">[不]在列出值范围内</td></tr> <tr><td>IS [NOT] NULL</td> <td style="text-align:left;">[不]为空</td></tr></tbody></table> <h3 id="日期时间函数"><a href="#日期时间函数" class="header-anchor">#</a> 日期时间函数</h3> <table><thead><tr><th>名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>NOW()</td> <td style="text-align:left;">当前日期和时间</td></tr> <tr><td>CURDATE()</td> <td style="text-align:left;">当前日期</td></tr> <tr><td>CURTIME()</td> <td style="text-align:left;">当前时间</td></tr> <tr><td>DATE_ADD()</td> <td style="text-align:left;">日期变化</td></tr> <tr><td>DATEDIFF()</td> <td style="text-align:left;">日期差值</td></tr> <tr><td>DATE_FORMAT()</td> <td style="text-align:left;">日期格式化</td></tr></tbody></table> <h3 id="信息函数"><a href="#信息函数" class="header-anchor">#</a> 信息函数</h3> <table><thead><tr><th>名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>CONNECTION_ID()</td> <td style="text-align:left;">连接ID</td></tr> <tr><td>DATEBASE()</td> <td style="text-align:left;">当前数据库</td></tr> <tr><td>LAST_INSERT_ID()</td> <td style="text-align:left;">最后插入记录的ID号</td></tr> <tr><td>USER()</td> <td style="text-align:left;">当前用户</td></tr> <tr><td>VERSION()</td> <td style="text-align:left;">版本信息</td></tr></tbody></table> <h3 id="聚合函数"><a href="#聚合函数" class="header-anchor">#</a> 聚合函数</h3> <table><thead><tr><th>名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>AVG()</td> <td style="text-align:left;">平均值</td></tr> <tr><td>COUNT()</td> <td style="text-align:left;">计数</td></tr> <tr><td>MAX()</td> <td style="text-align:left;">最大值</td></tr> <tr><td>MIN()</td> <td style="text-align:left;">最小值</td></tr> <tr><td>SUM()</td> <td style="text-align:left;">求和</td></tr></tbody></table> <h3 id="加密函数"><a href="#加密函数" class="header-anchor">#</a> 加密函数</h3> <table><thead><tr><th>名称</th> <th style="text-align:left;">描述</th></tr></thead> <tbody><tr><td>MD5()</td> <td style="text-align:left;">信息摘要算法</td></tr> <tr><td>PASSWORD()</td> <td style="text-align:left;">密码算法</td></tr></tbody></table> <h2 id="自定义函数"><a href="#自定义函数" class="header-anchor">#</a> 自定义函数</h2> <ul><li>用户自定义函数(user-defined function,UDF)是一种对 mysql 扩展的途径,其用法与内置函数相同</li> <li>自定义函数的两个必要条件
<ul><li>参数</li> <li>返回值</li></ul></li> <li>函数可以返回任意类型的值,同样可以接收这些类型的参数</li></ul> <p>创建自定义函数</p> <div class="language-sql line-numbers-mode"><pre class="language-sql"><code><span class="token keyword">CREATE</span> <span class="token keyword">FUNCTION</span> function_name <span class="token keyword">RETURNS</span> {STRING <span class="token operator">|</span> INTERGER <span class="token operator">|</span> <span class="token keyword">REAL</span> <span class="token operator">|</span> <span class="token keyword">DECIMAL</span>} routine_body<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>函数体</p> <ol><li>函数体由合法的 sql语句构成</li> <li>函数体可以是简单的 SELECT 或 INSERT 语句</li> <li>函数体如果为符合结构贼使用 BEGIN...END 语句</li> <li>符合结构可以包含声明,循环,控制结构</li></ol> <h2 id="存储过程"><a href="#存储过程" class="header-anchor">#</a> 存储过程</h2> <p>优点</p> <ol><li>增强 sql 语句的功能和灵活性</li> <li>实现加快的执行速度</li> <li>减少网络流量</li></ol> <h2 id="存储引擎"><a href="#存储引擎" class="header-anchor">#</a> 存储引擎</h2> <ol><li>MyISAM</li> <li>InnoDB</li> <li>Memory</li> <li>CSV</li> <li>Archive</li></ol> <ul><li><p>并发控制</p> <ul><li>当多个连接对记录进行修改时保证数据的一致性和完整性</li></ul></li> <li><p>锁</p> <ul><li>共享锁(读锁): 在同一时间段内,多个用户可以读取同一个资源,读取过程中数据不会发生任何变化</li> <li>排它锁(写锁): 在任何时候只能有一个用户写入资源,当进行写锁时会阻塞其他的读锁或者写锁操作</li></ul></li> <li><p>锁颗粒</p> <ul><li>表锁,是一种开销最小的锁策略</li> <li>行锁,是一种开销最大的锁策略</li></ul></li> <li><p>事务</p> <ul><li>事务用于保证数据库的完整性</li></ul></li> <li><p>事务的特性</p> <ul><li>原子性(Atomicity)</li> <li>一致性(Consistency)</li> <li>隔离性(Isolation)</li> <li>持久性(Durability)</li></ul></li> <li><p>外键</p> <ul><li>是保证数据一致性的策略</li></ul></li> <li><p>索引</p> <ul><li>是对数据表中一列或多列的值进行排序的一种结构</li></ul></li></ul> <p>各种存储引擎的特点</p> <table><thead><tr><th>特点</th> <th>MyISAM</th> <th>InnoDB</th> <th>Memory</th> <th>Archive</th></tr></thead> <tbody><tr><td>存储限制</td> <td>256TB</td> <td>64TB</td> <td>有</td> <td>无</td></tr> <tr><td>事务安全</td> <td>-</td> <td>支持</td> <td>-</td> <td>-</td></tr> <tr><td>支持索引</td> <td>支持</td> <td>支持</td> <td>支持</td> <td>-</td></tr> <tr><td>锁颗粒</td> <td>表锁</td> <td>行锁</td> <td>表锁</td> <td>行锁</td></tr> <tr><td>数据压缩</td> <td>支持</td> <td>-</td> <td>-</td> <td>支持</td></tr> <tr><td>支持外键</td> <td>-</td> <td>支持</td> <td>-</td> <td>-</td></tr></tbody></table></div></article> <section class="post-meta main-div" data-v-4e23451f><section class="post-date clearfix" data-v-4e23451f><span class="create-date" data-v-4e23451f>
      发布时间 : 2020-02-20
    </span> <span class="update-date" data-v-4e23451f>
      最后修改 : Invalid Date
    </span></section> <section class="post-links" data-v-4e23451f><a href="/posts/2019/11/29/scss.html" class="post-link" data-v-4e23451f>
      上一篇 : react 使用 dart-sass
    </a> <a href="/posts/2020/03/29/phicomm-n1.html" class="post-link" data-v-4e23451f>
      下一篇 : 斐讯n1
    </a></section></section> <!----></div></main> <aside class="aside" data-v-4dd605a1><div class="info-card main-div" data-v-9d847660 data-v-4dd605a1><div class="info-card-header" data-v-9d847660><img src="/images/common/avatar.jpg" alt="Cumelmell" class="info-avatar" data-v-9d847660></div> <div class="info-card-body" data-v-9d847660><section class="info-nickname" data-v-9d847660>
      Cumelmell
    </section> <section class="info-desc" data-v-9d847660>Just Enjoy Coding</section> <section class="info-contact" data-v-9d847660><section data-v-9d847660><span title="China" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>China</title><use xlink:href="#icon-location" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          China
        </span></span></section> <!----> <section data-v-9d847660><a href="mailto:cumelmell@foxmail.com" title="cumelmell@foxmail.com" data-v-9d847660 data-v-9d847660><svg class="icon" style="font-size:1em;" data-v-9d847660 data-v-9d847660><title data-v-9d847660 data-v-9d847660>cumelmell@foxmail.com</title><use xlink:href="#icon-email" data-v-9d847660 data-v-9d847660></use></svg><span class="info-text" data-v-9d847660 data-v-9d847660>
          cumelmell@foxmail.com
        </span></a></section></section></div> <!----></div> <div class="post-nav-card main-div" style="position:relative;top:0;width:0px;" data-v-4dd605a1><div class="post-nav-contents"><svg class="icon"><title>book</title><use xlink:href="#icon-book"></use></svg> <span></span> <div class="post-nav-toc"><ul><li><a href="/posts/2020/02/20/mysql.html#创建数据库">创建数据库</a></li><li><a href="/posts/2020/02/20/mysql.html#查看当前服务器下数据库列表">查看当前服务器下数据库列表</a></li><li><a href="/posts/2020/02/20/mysql.html#查看错误信息">查看错误信息</a></li><li><a href="/posts/2020/02/20/mysql.html#修改数据库">修改数据库</a></li><li><a href="/posts/2020/02/20/mysql.html#删除数据库">删除数据库</a></li><li><a href="/posts/2020/02/20/mysql.html#整型">整型</a></li><li><a href="/posts/2020/02/20/mysql.html#浮点型">浮点型</a></li><li><a href="/posts/2020/02/20/mysql.html#字符型">字符型</a></li><li><a href="/posts/2020/02/20/mysql.html#打开数据库">打开数据库</a></li><li><a href="/posts/2020/02/20/mysql.html#创建数据表">创建数据表</a></li><li><a href="/posts/2020/02/20/mysql.html#查看数据表">查看数据表</a></li><li><a href="/posts/2020/02/20/mysql.html#查看数据表结构">查看数据表结构</a></li><li><a href="/posts/2020/02/20/mysql.html#插入记录-insert">插入记录 INSERT</a></li><li><a href="/posts/2020/02/20/mysql.html#查看记录-select">查看记录 SELECT</a></li><li><a href="/posts/2020/02/20/mysql.html#数据表字段属性">数据表字段属性</a><ul><li><a href="/posts/2020/02/20/mysql.html#空值">空值</a></li><li><a href="/posts/2020/02/20/mysql.html#非空">非空</a></li><li><a href="/posts/2020/02/20/mysql.html#自动编号">自动编号</a></li></ul></li><li><a href="/posts/2020/02/20/mysql.html#主键">主键</a></li><li><a href="/posts/2020/02/20/mysql.html#约束">约束</a><ul><li><a href="/posts/2020/02/20/mysql.html#unique-key">UNIQUE KEY</a></li><li><a href="/posts/2020/02/20/mysql.html#默认约束-default">默认约束 DEFAULT</a></li><li><a href="/posts/2020/02/20/mysql.html#外键约束-foreign-key">外键约束 FOREIGN KEY</a></li><li><a href="/posts/2020/02/20/mysql.html#表级约束与列级约束">表级约束与列级约束</a></li></ul></li><li><a href="/posts/2020/02/20/mysql.html#修改数据表">修改数据表</a><ul><li><a href="/posts/2020/02/20/mysql.html#添加单列">添加单列</a></li><li><a href="/posts/2020/02/20/mysql.html#删除列">删除列</a></li><li><a href="/posts/2020/02/20/mysql.html#添加主键约束">添加主键约束</a></li><li><a href="/posts/2020/02/20/mysql.html#添加唯一约束">添加唯一约束</a></li><li><a href="/posts/2020/02/20/mysql.html#添加外检约束">添加外检约束</a></li><li><a href="/posts/2020/02/20/mysql.html#添加-删除默认约束">添加/删除默认约束</a></li><li><a href="/posts/2020/02/20/mysql.html#删除主键约束">删除主键约束</a></li><li><a href="/posts/2020/02/20/mysql.html#删除唯一约束">删除唯一约束</a></li><li><a href="/posts/2020/02/20/mysql.html#删除外检约束">删除外检约束</a></li><li><a href="/posts/2020/02/20/mysql.html#修改列定义">修改列定义</a></li><li><a href="/posts/2020/02/20/mysql.html#修改列名称">修改列名称</a></li><li><a href="/posts/2020/02/20/mysql.html#数据表更名">数据表更名</a></li><li><a href="/posts/2020/02/20/mysql.html#insert">INSERT</a></li><li><a href="/posts/2020/02/20/mysql.html#update">UPDATE</a></li><li><a href="/posts/2020/02/20/mysql.html#delete">DELETE</a></li><li><a href="/posts/2020/02/20/mysql.html#select">SELECT</a></li><li><a href="/posts/2020/02/20/mysql.html#where">WHERE</a></li><li><a href="/posts/2020/02/20/mysql.html#group-by">GROUP BY</a></li><li><a href="/posts/2020/02/20/mysql.html#order-by">ORDER BY</a></li><li><a href="/posts/2020/02/20/mysql.html#limit">LIMIT</a></li></ul></li><li><a href="/posts/2020/02/20/mysql.html#子查询-连接">子查询 连接</a><ul><li><a href="/posts/2020/02/20/mysql.html#子查询">子查询</a></li><li><a href="/posts/2020/02/20/mysql.html#多表更新">多表更新</a></li><li><a href="/posts/2020/02/20/mysql.html#连接">连接</a></li></ul></li><li><a href="/posts/2020/02/20/mysql.html#运算符及函数">运算符及函数</a><ul><li><a href="/posts/2020/02/20/mysql.html#字符函数">字符函数</a></li><li><a href="/posts/2020/02/20/mysql.html#数值运算符与函数">数值运算符与函数</a></li><li><a href="/posts/2020/02/20/mysql.html#比较运算符与函数">比较运算符与函数</a></li><li><a href="/posts/2020/02/20/mysql.html#日期时间函数">日期时间函数</a></li><li><a href="/posts/2020/02/20/mysql.html#信息函数">信息函数</a></li><li><a href="/posts/2020/02/20/mysql.html#聚合函数">聚合函数</a></li><li><a href="/posts/2020/02/20/mysql.html#加密函数">加密函数</a></li></ul></li><li><a href="/posts/2020/02/20/mysql.html#自定义函数">自定义函数</a></li><li><a href="/posts/2020/02/20/mysql.html#存储过程">存储过程</a></li><li><a href="/posts/2020/02/20/mysql.html#存储引擎">存储引擎</a></li></ul></div></div> <!----></div></aside></div> <footer class="footer" data-v-1375e54c><!----> <!----> <p class="footer-text" data-v-1375e54c>Copyright 2019-present <a href="https://github.com/d1313113" target="_blank">Cumelmell</a> | MIT License</p></footer></div><div class="global-ui"><!----><!----><div class="cat-container" data-v-a13867c0><canvas id="vuepress-cat" width="280" height="250" class="live2d" data-v-a13867c0></canvas></div></div></div>
    <script src="/assets/js/app.181418c7.js" defer></script><script src="/assets/js/15.101a1bc0.js" defer></script><script src="/assets/js/30.cb155480.js" defer></script>
  </body>
</html>
