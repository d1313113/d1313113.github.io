(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{356:function(s,t,a){s.exports=a.p+"assets/img/2019-11-15-chould01.be9348ee.png"},357:function(s,t,a){s.exports=a.p+"assets/img/2019-11-15-chould02.ec1df126.png"},358:function(s,t,a){s.exports=a.p+"assets/img/2019-11-15-chould03.5ac6fc37.png"},405:function(s,t,a){"use strict";a.r(t);var e=a(2),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,e=s._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"如何配置免密码登录服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#如何配置免密码登录服务器"}},[s._v("#")]),s._v(" 如何配置免密码登录服务器")]),s._v(" "),e("p",[s._v("希望在免输入ip以及密码情况下登录服务器,采用配置"),e("code",[s._v("public-key")]),s._v("方式登录...")]),s._v(" "),e("h2",{attrs:{id:"通过账号密码登录服务器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过账号密码登录服务器"}},[s._v("#")]),s._v(" 通过账号密码登录服务器")]),s._v(" "),e("p",[s._v("在终端中通过以下命令登录服务器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("br"),e("br"),e("br")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 用户名@远端服务器ip/host -p 端口号")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("ssh")]),s._v(" root@170.xxx.xxx.xxx -p xx\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 随后提示输入密码,通过密码登录到服务器")]),s._v("\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("这里已经配置过"),e("code",[s._v("~/.ssh/config")]),s._v("文件了,因此直接登录的"),e("code",[s._v("tx_chould")]),s._v(".\n"),e("img",{attrs:{src:a(356),alt:"ssh_login1"}}),s._v("\n原始直接登录的话是长这个样子.\n"),e("img",{attrs:{src:a(357),alt:"ssh_login2"}})]),s._v(" "),e("h2",{attrs:{id:"通过-public-key-方式登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#通过-public-key-方式登录"}},[s._v("#")]),s._v(" 通过 public-key 方式登录")]),s._v(" "),e("p",[s._v("一般来说服务器的"),e("code",[s._v("ip")]),s._v("或者是"),e("code",[s._v("host")]),s._v("相对来说都比较难记忆,所以可以通过配置"),e("code",[s._v("ssh config")]),s._v("来简化操作.")]),s._v(" "),e("h3",{attrs:{id:"生成-public-key"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成-public-key"}},[s._v("#")]),s._v(" 生成 public-key")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("br")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# 生成为服务器准备的key "comment"')]),s._v("\nssh-keygen -t rsa -b "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4096")]),s._v(" -C "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"tx_could"')]),s._v(" -f ~/.ssh/tx_chould_id_rsa\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h3",{attrs:{id:"配置-ssh-config"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置-ssh-config"}},[s._v("#")]),s._v(" 配置 ssh config")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" ~/.ssh\n\n"),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" config\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("在"),e("code",[s._v("~/.ssh/config")]),s._v("文件中加入"),e("code",[s._v("ssh")]),s._v("的配置文件,早前配置过"),e("code",[s._v("github")]),s._v("及"),e("code",[s._v("gitee")]),s._v("的"),e("code",[s._v("public-key")]),s._v("配置了,在后面新增即可.")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("br"),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("div",{staticClass:"highlighted"},[s._v(" ")]),e("br")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# gitee")]),s._v("\nHost gitee.com\nHostName gitee.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/gitee_id_rsa\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# github")]),s._v("\nHost github.com\nHostName github.com\nPreferredAuthentications publickey\nIdentityFile ~/.ssh/github_id_rsa\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 新增服务器配置")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# tx could, 别名")]),s._v("\nHost tx_chould\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 服务器地址,完整的域名或者ip地址")]),s._v("\nHostName "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("111.111")]),s._v(".111.111\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 登录服务器的用户名")]),s._v("\nUser root\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 优先认证ssh类型")]),s._v("\nPreferredAuthentications publickey\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# rsa私钥配置文件路径")]),s._v("\nIdentityFile ~/.ssh/tx_chould_id_rsa\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br"),e("span",{staticClass:"line-number"},[s._v("23")]),e("br")])]),e("p",[s._v("此时就可以达到最上面通过"),e("code",[s._v("ssh tx_chould")]),s._v("方式来登录,当现在还未将rsa文件放置服务器中.因此还未能直接免密登录")]),s._v(" "),e("h3",{attrs:{id:"放置公钥到服务器目录中"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#放置公钥到服务器目录中"}},[s._v("#")]),s._v(" 放置公钥到服务器目录中")]),s._v(" "),e("p",[s._v("此时在本地执行下面命令,将公钥同步到服务器中")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("div",{staticClass:"highlight-lines"},[e("div",{staticClass:"highlighted"},[s._v(" ")]),e("br")]),e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("~ ssh-copy-id -i .ssh/tx_chould_id_rsa.pub tx_chould\n")])]),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[e("img",{attrs:{src:a(358),alt:"ssh_login2"}})]),s._v(" "),e("p",[s._v("到此就大功告成,可以直接免密登录服务器了")]),s._v(" "),e("h2",{attrs:{id:"关闭密码登录"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#关闭密码登录"}},[s._v("#")]),s._v(" 关闭密码登录")]),s._v(" "),e("p",[s._v("在为了安全的情况下,可以关闭服务器的密码登录功能,只允许通过"),e("code",[s._v("public-key")]),s._v("方式登录")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" /etc/ssh/sshd_config\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 将PasswordAuthentication设置成no，")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 然后重启service sshd restart")]),s._v("\n\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 禁用密码登录")]),s._v("\nHost *\n  PasswordAuthentication no\n如果你需要用密码登录，这一步也可以不设置（ssh root@111.111.111.111）\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br")])])])}),[],!1,null,null,null);t.default=n.exports}}]);